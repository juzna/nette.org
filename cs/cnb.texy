Extras/cnb
**********

ČNB - aktuální kurzovní lístek
********************

Pomocí pluginu můžete stáhnout libovolnou měnu a nechat ji na jakoukoliv přepočítat.

|Verze | 0.7
|Download | [attachment:cnb.zip]
|Ukázka |
|Forum thread | http://forum.nette.org/cs/1880-cnb-ceska-narodni-banka
|Autor | Milan Matějček ([matata | http://forum.nette.org/cs/profile.php?id=1966])
|Licence | New BSD License

Instalace
---------

Stáhněte archiv [attachment:cnb.zip] a jeho obsah si uložte dle vaší adresářové struktury např: do "app/plugin". V archivu je soubor c_cnb.php, v něm je ukázka použití kódu a samotná funkcionalita. Doporučuji přečíst vlákno ve fóru.


Příklad použití
---------------
**Pro správné fungování je potřeba nastavit tempDir**
/--php
Environment::setVariable('tempDir', APP_DIR . '/temp');
\--
a doporučuji nastavit expiraci cookie a spuštení session které třída také využívá
/--php
$session    =Environment::getSession();
$session    ->setExpiration(15552000);//180 dni
if (!$session->isStarted())
    $session->start();
\--
Předpokládá se že využíváte RobotLoader

Máme e-shop, kde máme výchozí měnu v rublech na webu je chceme zobrazovat jako Rublik a přepočítávat na český koruny (kačeny) a eura (€)

ve statický Cnb::$symbol rub není definovaný, czk je definovaný a nechá se přetížit, euro je beze změny

kódy jako czk, rub, eur, usd jsou vzaty z kurzovního lístku na url Cnb::CNB_LIST


/--php

if(!isset($vystupniMena))
{
    $vystupniMena=0;//Třída sama si nastaví pokud není definovaná.
}

$cnb =new Cnb('rub|kačeny|€', $vystupniMena, array('Rublik'=>'rub', 'kačeny'=>'czk'), 2);//poslední parametr 2 znamená: kódy měn budou vraceny ve formátu první písmeno velké tj. Eur, Rub, Czk
$cnb ->setWebMoney('eur');//pro naši ukázku nastavíme výchozí měnu na eura
echo $cnb->change(10);//převede 10 rublu na eura
echo $cnb->change(10, 'czk', 'rub', 2);//převede 10 korun českých na rubly a zaokrouhli na 2 desetiny
echo $cnb->WebMoney; //alias $cnb->getWebMoney(); vrátí Eur v tomto formátu
echo $cnb->DefMoney; //alias $cnb->getDefMoney(); vrátí Rub v tomto formátu

//budete-li vypisovat částky s vašimi symboly definované v poli při volání třídy nebo kódy měn z kurzovního lístku je jen na vás
echo $cnb->Code;//vrátí Eur v tomto formátu
echo $cnb->getCode('kačeny');//vrátí Czk
echo $cnb->getSymbol('czk');//vrátí kačeny
echo $cnb->Symbol;//vrátí €
echo $cnb->getDate('Y-m-d');//vrátí datum posledního stažení kurzovního lístku
Debug::dump( $cnb->getExchangeRate());//všechny dostupné měny a jejich vlastnosti se kterými můžete pracovat
\--

{{attachment: cnb.zip}}
{{attachment: cnb.zip}}
{{attachment: cnb.zip}}
{{attachment: cnb.zip}}

{{author: h4kuna|1966}}
